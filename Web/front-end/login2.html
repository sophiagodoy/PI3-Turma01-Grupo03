<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login PUCBets</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="base.css" rel="stylesheet" />
  </head>
  
  <body class="bodyForms">
    <div class="top-rectangle">
      <buttonPUCBets type="button" class="buttonPUCBets" id="PUCBetsButton">PUCBets</button>
    </div>

    <div class="rectangleForms">
        <div class="d-grid gap-2 col-6 mx-auto">
            <p class="eggyolk" style="font-size: 45px; font-weight: bold;">LOGIN:</p>
            <button type="button" onclick="loginSuperID()">
                <span style="color: #A3B18A;">Super</span><span style="color: #586249;">ID</span>
              </button>              
            <button type="button" onclick="loginGoogle()">Google</button>
            <button type="button" onclick="loginFacebook()">Facebook</button>
        </div>
    </div>

    <div id="popup" class="popup">
        <div class="popup-content">
        <span class="close-btn" onclick="fecharPopup()">&times;</span>
        <p>Escaneie o QR Code com o app SuperID:</p>
        <img id="qrcode" src="" alt="QR Code" style="width: 200px;">
        </div>
    </div>
  

    <script>

        function loginSuperID() {
            // Faz requisição para a Firebase Function performAuth
            const parceiroURL = "http://127.0.0.1:5501/front-end/login2.html";
            const apiKey = "SUA_API_KEY_SECRETA";
            //precisamos usar as functions - ainda nao ensinado 
            fetch("https://seu-firebase-function-url/performAuth", {
                method: "POST",
                headers: {
                "Content-Type": "application/json",
                },
                body: JSON.stringify({
                siteUrl: parceiroURL,
                apiKey: apiKey,
                }),
            })
            .then(res => res.json())
            .then(data => {
                // Exibe o QR Code no pop-up
                document.getElementById("qrcode").src = data.qrBase64;
                document.getElementById("popup").style.display = "block";
                //depois que o QRCode for verificado leva para uma tela de sucesso 
                //window.location.href = "paginaSucesso.html";

            })
            .catch(error => {
                console.error("Erro ao gerar QRCode:", error);
                alert("Erro ao gerar QRCode.");
            });
        }

        function fecharPopup() {
            document.getElementById("popup").style.display = "none";
        }


        function loginGoogle() {
            alert("Login com Google ainda não implementado.");
        }

        function loginFacebook() {
            alert("Login com Facebook ainda não implementado.");
        }

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
